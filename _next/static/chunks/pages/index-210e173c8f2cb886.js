(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3845:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),a=r(5893),s=(0,o.default)((0,a.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined");t.Z=s},8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5596)}])},3232:function(e,t,r){"use strict";var n=r(5893),o=r(9008),a=r.n(o);r(7294);let s=e=>{let{title:t}=e;return(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:t}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})};t.Z=s},3557:function(e,t,r){"use strict";var n=r(1163),o=r.n(n),a=r(7294),s=r(1876).Buffer;let i=e=>{if(!/^(?:[\w-]*\.){2}[\w-]*$/.test(e))return!0;let t=JSON.parse(s.from(e.split(".")[1],"base64").toString("utf8")),r=Math.floor(Date.now()/1e3);return r>t.exp};t.Z=function(){let{redirectTo:e="",redirectIfFound:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[r,n]=(0,a.useState)({isLoggedIn:!1,isLoading:!0});(0,a.useEffect)(()=>{if(null===sessionStorage.getItem("token")||i(sessionStorage.getItem("token"))){n({isLoading:!1,isLoggedIn:!1});return}n({isLoading:!1,isLoggedIn:!0})},[]);let s=()=>{sessionStorage.removeItem("token"),n({isLoading:!1,isLoggedIn:!1})};return(0,a.useEffect)(()=>{e&&!r.isLoading&&(e&&!t&&!r.isLoggedIn||t&&r.isLoggedIn)&&o().push(e)},[r,t,e]),{auth:r,logOff:s}}},7410:function(e,t,r){"use strict";r.d(t,{e:function(){return a}});var n=r(8945);let o=n.Z.create({baseURL:"https://enquetes-function-t4ptokxoba-uc.a.run.app"});o.defaults.headers.common["Content-Type"]="application/json",o.defaults.headers.common["Access-Control-Allow-Origin"]="*",t.Z=o;let a=e=>n.Z.isAxiosError(e)&&e.response&&401===e.response.status?e.response.data.message:e.message},5596:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var n=r(5893),o=r(3321),a=r(9520),s=r(7357),i=r(3366),l=r(7462),c=r(7294),u=r(6010),d=r(4780),f=r(948),m=r(1657),p=(0,r(8169).Z)((0,n.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),g=r(1588),h=r(4867);function v(e){return(0,h.Z)("MuiAvatar",e)}(0,g.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);let x=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Z=e=>{let{classes:t,variant:r,colorDefault:n}=e;return(0,d.Z)({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},v,t)},w=(0,f.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>(0,l.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===t.variant&&{borderRadius:(e.vars||e).shape.borderRadius},"square"===t.variant&&{borderRadius:0},t.colorDefault&&(0,l.Z)({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[600]}))),b=(0,f.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),j=(0,f.ZP)(p,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"}),k=c.forwardRef(function(e,t){let r=(0,m.Z)({props:e,name:"MuiAvatar"}),{alt:o,children:a,className:s,component:d="div",imgProps:f,sizes:p,src:g,srcSet:h,variant:v="circular"}=r,k=(0,i.Z)(r,x),y=null,S=function({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){let[o,a]=c.useState(!1);return c.useEffect(()=>{if(!r&&!n)return;a(!1);let o=!0,s=new Image;return s.onload=()=>{o&&a("loaded")},s.onerror=()=>{o&&a("error")},s.crossOrigin=e,s.referrerPolicy=t,s.src=r,n&&(s.srcset=n),()=>{o=!1}},[e,t,r,n]),o}((0,l.Z)({},f,{src:g,srcSet:h})),I=g||h,L=I&&"error"!==S,A=(0,l.Z)({},r,{colorDefault:!L,component:d,variant:v}),E=Z(A);return y=L?(0,n.jsx)(b,(0,l.Z)({alt:o,src:g,srcSet:h,sizes:p,ownerState:A,className:E.img},f)):null!=a?a:I&&o?o[0]:(0,n.jsx)(j,{className:E.fallback}),(0,n.jsx)(w,(0,l.Z)({as:d,ownerState:A,className:(0,u.Z)(E.root,s),ref:t},k,{children:y}))});var y=r(5861),S=r(5568),I=r(99),L=r(3845),A=r(3557),E=r(1163),R=r(3232),_=r(7410);let C=()=>{let{auth:e}=(0,A.Z)({redirectTo:"/questionarios",redirectIfFound:!0}),[t,r]=(0,c.useState)(null),i=(0,E.useRouter)(),l=async e=>{e.preventDefault();let t=new FormData(e.currentTarget);try{let{data:{accessToken:n}}=await _.Z.post("/auth/login",{username:t.get("cpf"),password:t.get("password")});sessionStorage.setItem("token",n),i.replace("/questionarios")}catch(o){o instanceof Error&&r((0,_.e)(o))}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.Z,{title:"Enquetes App - Login"}),(0,n.jsx)(a.Z,{component:"main",maxWidth:"xs",children:(0,n.jsxs)(s.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(k,{sx:{m:1,bgcolor:"secondary.main"},children:(0,n.jsx)(L.Z,{})}),(0,n.jsx)(y.Z,{component:"h1",variant:"h5",children:"Enquetes App - Log in"}),t&&(0,n.jsx)(S.Z,{severity:"error",sx:{my:1},onClose:()=>r(null),children:t}),(0,n.jsxs)(s.Z,{component:"form",onSubmit:l,noValidate:!0,sx:{mt:1},children:[(0,n.jsx)(I.Z,{margin:"normal",required:!0,fullWidth:!0,id:"cpf",label:"CPF",name:"cpf",autoComplete:"cpf",autoFocus:!0,error:!!t,disabled:!!t}),(0,n.jsx)(I.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Senha",type:"password",id:"password",autoComplete:"current-password",error:!!t,disabled:!!t}),(0,n.jsx)(o.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Entrar"})]})]})})]})};var D=C}},function(e){e.O(0,[889,99,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);