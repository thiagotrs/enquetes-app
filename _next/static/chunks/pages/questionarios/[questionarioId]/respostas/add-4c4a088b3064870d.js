(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[590],{1023:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var s=r(n(4938)),i=n(5893),o=(0,s.default)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");t.Z=o},6284:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/questionarios/[questionarioId]/respostas/add",function(){return n(9613)}])},1596:function(e,t,n){"use strict";var r=n(5893),s=n(3321),i=n(1664),o=n.n(i);n(7294);var a=n(1023);let c=e=>{let{to:t}=e;return(0,r.jsx)(s.Z,{LinkComponent:o(),variant:"outlined",sx:{mb:3},startIcon:(0,r.jsx)(a.Z,{}),href:t,children:"Voltar"})};t.Z=c},3232:function(e,t,n){"use strict";var r=n(5893),s=n(9008),i=n.n(s);n(7294);let o=e=>{let{title:t}=e;return(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:t}),(0,r.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})};t.Z=o},3505:function(e,t,n){"use strict";var r=n(5893),s=n(7357),i=n(3321);n(7294);var o=n(3540);let a=e=>{let{onLogOut:t}=e;return(0,r.jsx)(s.Z,{sx:{height:200,bgcolor:"indigo",display:"flex",justifyContent:"flex-end",alignItems:"start"},children:(0,r.jsx)(i.Z,{variant:"contained",sx:{bgcolor:"white",color:"indigo",m:3},startIcon:(0,r.jsx)(o.Z,{}),onClick:t,children:"Sair"})})};t.Z=a},1943:function(e,t,n){"use strict";var r=n(5893),s=n(9520),i=n(629);n(7294);let o=e=>{let{children:t,size:n="md"}=e;return(0,r.jsx)(s.Z,{component:"main",maxWidth:n,children:(0,r.jsx)(i.Z,{variant:"outlined",sx:{mt:-6,mb:{xs:3,md:6},p:{xs:2,md:3},position:"relative"},children:t})})};t.Z=o},2459:function(e,t,n){"use strict";var r=n(5893),s=n(9520),i=n(5861);n(7294);var o=n(6517);let a=()=>(0,r.jsxs)(s.Z,{component:"main",sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh"},children:[(0,r.jsx)(i.Z,{component:"p",variant:"h1",children:(0,r.jsx)(o.Z,{fontSize:"large"})}),(0,r.jsx)(i.Z,{component:"h1",variant:"h3",children:"Autenticando..."})]});t.Z=a},4345:function(e,t,n){"use strict";var r=n(5893),s=n(5861);n(7294);let i=e=>{let{children:t}=e;return(0,r.jsx)(s.Z,{component:"h1",variant:"h3",children:t})};t.Z=i},3557:function(e,t,n){"use strict";var r=n(1163),s=n.n(r),i=n(7294),o=n(1876).Buffer;let a=e=>{if(!/^(?:[\w-]*\.){2}[\w-]*$/.test(e))return!0;let t=JSON.parse(o.from(e.split(".")[1],"base64").toString("utf8")),n=Math.floor(Date.now()/1e3);return n>t.exp};t.Z=function(){let{redirectTo:e="",redirectIfFound:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,r]=(0,i.useState)({isLoggedIn:!1,isLoading:!0});(0,i.useEffect)(()=>{if(null===sessionStorage.getItem("token")||a(sessionStorage.getItem("token"))){r({isLoading:!1,isLoggedIn:!1});return}r({isLoading:!1,isLoggedIn:!0})},[]);let o=()=>{sessionStorage.removeItem("token"),r({isLoading:!1,isLoggedIn:!1})};return(0,i.useEffect)(()=>{e&&!n.isLoading&&(e&&!t&&!n.isLoggedIn||t&&n.isLoggedIn)&&s().push(e)},[n,t,e]),{auth:n,logOff:o}}},714:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(9734),s=n(7410);function i(e){let{data:t,error:n,mutate:i,isLoading:o}=(0,r.ZP)(e,async e=>{let t=await s.Z.get(e,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}});return t.data});return{data:t,error:n,isLoading:o,mutate:i}}},7410:function(e,t,n){"use strict";n.d(t,{e:function(){return i}});var r=n(8945);let s=r.Z.create({baseURL:"https://enquetes-function-t4ptokxoba-uc.a.run.app"});s.defaults.headers.common["Content-Type"]="application/json",s.defaults.headers.common["Access-Control-Allow-Origin"]="*",t.Z=s;let i=e=>r.Z.isAxiosError(e)&&e.response&&401===e.response.status?e.response.data.message:e.message},7529:function(e,t,n){"use strict";n.d(t,{H4:function(){return o},Th:function(){return s},qu:function(){return i}});var r=n(7410);let s=async e=>{let{nome:t,descricao:n,perguntas:s}=e;return r.Z.post("/questionario",{nome:t,descricao:n,perguntas:s},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}})},i=async e=>{let{id:t,nome:n,descricao:s,perguntas:i}=e;return r.Z.put("/questionario/".concat(t),{nome:n,descricao:s,perguntas:i},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}})},o=async e=>{let{id:t,respostaPerguntas:n}=e;return r.Z.post("/questionario/".concat(t,"/resposta"),{respostaPerguntas:n},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}})}},9613:function(e,t,n){"use strict";n.r(t);var r=n(5893),s=n(5568),i=n(5861),o=n(6886),a=n(99),c=n(3321),u=n(1163),l=n(7294),d=n(3557),h=n(1596),g=n(3505),m=n(3232),p=n(1943),f=n(2459),x=n(7410),Z=n(7529),v=n(714),j=n(4345);let I=()=>{let{auth:e,logOff:t}=(0,d.Z)({redirectTo:"/"}),n=(0,u.useRouter)(),{questionarioId:I}=n.query,{data:k}=(0,v.i)("/questionario/".concat(I)),[w,y]=(0,l.useState)({}),[L,b]=(0,l.useState)(null);if(e.isLoading||!e.isLoggedIn||!k)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{title:"Enquetes App"}),(0,r.jsx)(f.Z,{})]});let S=(e,t)=>{y({...w,[e]:t})},q=()=>{(0,Z.H4)({id:I,respostaPerguntas:Object.keys(w).map(e=>({perguntaId:e,descricao:w[e]}))}).then(e=>{n.replace("/questionarios")}).catch(e=>{e instanceof Error&&b((0,x.e)(e))})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{title:"Enquetes App - Responder Questionario"}),(0,r.jsx)(g.Z,{onLogOut:t}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(h.Z,{to:"/questionarios"}),(0,r.jsx)(j.Z,{children:"Resposta"}),L&&(0,r.jsx)(s.Z,{severity:"error",sx:{my:1},onClose:()=>b(null),children:L}),(0,r.jsx)(i.Z,{component:"h2",variant:"h4",my:3,fontWeight:"light",children:k.nome}),(0,r.jsx)(i.Z,{component:"p",variant:"subtitle1",my:3,children:k.descricao}),k.perguntas.map(e=>(0,r.jsx)(o.ZP,{container:!0,spacing:2,children:(0,r.jsxs)(o.ZP,{item:!0,flexGrow:1,children:[(0,r.jsx)(i.Z,{component:"h2",variant:"h6",my:3,children:e.descricao}),(0,r.jsx)(a.Z,{error:void 0===w[e.id]||""===w[e.id].trim(),required:!0,label:"Resposta",fullWidth:!0,autoComplete:"given-name",variant:"standard",sx:{mb:2},value:w[e.id],onChange:t=>S(e.id,t.target.value)})]})},e.id)),(0,r.jsx)(c.Z,{disabled:Object.keys(w).some(e=>void 0===w[e]||""===w[e].trim()),fullWidth:!0,variant:"contained",color:"secondary",sx:{mt:3,mb:2},onClick:q,children:"Salvar Resposta"})]})]})};t.default=I}},function(e){e.O(0,[889,99,903,734,774,888,179],function(){return e(e.s=6284)}),_N_E=e.O()}]);