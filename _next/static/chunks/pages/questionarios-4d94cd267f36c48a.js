(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{9705:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/questionarios",function(){return n(391)}])},3232:function(e,t,n){"use strict";var i=n(5893),s=n(9008),r=n.n(s);n(7294);let o=e=>{let{title:t}=e;return(0,i.jsxs)(r(),{children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})};t.Z=o},3505:function(e,t,n){"use strict";var i=n(5893),s=n(7357),r=n(3321);n(7294);var o=n(3540);let a=e=>{let{onLogOut:t}=e;return(0,i.jsx)(s.Z,{sx:{height:200,bgcolor:"indigo",display:"flex",justifyContent:"flex-end",alignItems:"start"},children:(0,i.jsx)(r.Z,{variant:"contained",sx:{bgcolor:"white",color:"indigo",m:3},startIcon:(0,i.jsx)(o.Z,{}),onClick:t,children:"Sair"})})};t.Z=a},1943:function(e,t,n){"use strict";var i=n(5893),s=n(9520),r=n(629);n(7294);let o=e=>{let{children:t,size:n="md"}=e;return(0,i.jsx)(s.Z,{component:"main",maxWidth:n,children:(0,i.jsx)(r.Z,{variant:"outlined",sx:{mt:-6,mb:{xs:3,md:6},p:{xs:2,md:3},position:"relative"},children:t})})};t.Z=o},2459:function(e,t,n){"use strict";var i=n(5893),s=n(9520),r=n(5861);n(7294);var o=n(6517);let a=()=>(0,i.jsxs)(s.Z,{component:"main",sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh"},children:[(0,i.jsx)(r.Z,{component:"p",variant:"h1",children:(0,i.jsx)(o.Z,{fontSize:"large"})}),(0,i.jsx)(r.Z,{component:"h1",variant:"h3",children:"Autenticando..."})]});t.Z=a},4345:function(e,t,n){"use strict";var i=n(5893),s=n(5861);n(7294);let r=e=>{let{children:t}=e;return(0,i.jsx)(s.Z,{component:"h1",variant:"h3",children:t})};t.Z=r},3557:function(e,t,n){"use strict";var i=n(1163),s=n.n(i),r=n(7294),o=n(1876).Buffer;let a=e=>{if(!/^(?:[\w-]*\.){2}[\w-]*$/.test(e))return!0;let t=JSON.parse(o.from(e.split(".")[1],"base64").toString("utf8")),n=Math.floor(Date.now()/1e3);return n>t.exp};t.Z=function(){let{redirectTo:e="",redirectIfFound:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,i]=(0,r.useState)({isLoggedIn:!1,isLoading:!0});(0,r.useEffect)(()=>{if(null===sessionStorage.getItem("token")||a(sessionStorage.getItem("token"))){i({isLoading:!1,isLoggedIn:!1});return}i({isLoading:!1,isLoggedIn:!0})},[]);let o=()=>{sessionStorage.removeItem("token"),i({isLoading:!1,isLoggedIn:!1})};return(0,r.useEffect)(()=>{e&&!n.isLoading&&(e&&!t&&!n.isLoggedIn||t&&n.isLoggedIn)&&s().push(e)},[n,t,e]),{auth:n,logOff:o}}},714:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var i=n(9734),s=n(7410);function r(e){let{data:t,error:n,mutate:r,isLoading:o}=(0,i.ZP)(e,async e=>{let t=await s.Z.get(e,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}});return t.data});return{data:t,error:n,isLoading:o,mutate:r}}},7410:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(8945);let s=i.Z.create({baseURL:"https://enquetes-function-t4ptokxoba-uc.a.run.app"});s.defaults.headers.common["Content-Type"]="application/json",s.defaults.headers.common["Access-Control-Allow-Origin"]="*",t.Z=s;let r=e=>i.Z.isAxiosError(e)&&e.response&&401===e.response.status?e.response.data.message:e.message},391:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var i=n(5893),s=n(6886),r=n(3321),o=n(5568),a=n(2882),c=n(629),l=n(7906),d=n(3184),u=n(3816),h=n(3252),x=n(295),g=n(1664),p=n.n(g),m=n(1163);n(7294);var f=n(3557),Z=n(3232),j=n(6540),v=n(7957),w=n(9906),I=n(1943),L=n(3505),b=n(872),k=n(6964);let y=e=>{let{page:t,total:n,path:s}=e;return(0,i.jsx)(b.Z,{page:t,count:Math.ceil(n/4),shape:"rounded",color:"primary",sx:{my:3},renderItem:e=>(0,i.jsx)(k.Z,{component:p(),href:"".concat(s).concat(0===e.page?"":"?page=".concat(e.page)),...e})})};var _=n(4345),q=n(2459),C=n(714),E=n(7410);let P=e=>{let t=new Date(e);return t.toLocaleString("pt-br")},S=()=>{let{auth:e,logOff:t}=(0,f.Z)({redirectTo:"/"}),n=(0,m.useRouter)(),{page:g="1"}=n.query,{data:b,error:k}=(0,C.i)("questionarios?page=".concat(parseInt(g)-1,"&limit=4")),S=k?(0,E.e)(k):null;if(e.isLoading||!e.isLoggedIn||!b)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.Z,{title:"Enquetes App"}),(0,i.jsx)(q.Z,{})]});let A=void 0===b?[]:b.questionarios.map(e=>({id:e.id,data:e.data,nome:e.nome,qtd_perguntas:e.perguntas.length}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.Z,{title:"Enquetes App - Questionarios"}),(0,i.jsx)(L.Z,{onLogOut:t}),(0,i.jsxs)(I.Z,{size:"lg",children:[(0,i.jsxs)(s.ZP,{container:!0,spacing:2,justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,i.jsx)(s.ZP,{item:!0,children:(0,i.jsx)(_.Z,{children:"Question\xe1rios"})}),(0,i.jsx)(s.ZP,{item:!0,children:(0,i.jsx)(r.Z,{LinkComponent:p(),variant:"contained",color:"success",href:"questionarios/add",startIcon:(0,i.jsx)(j.Z,{}),children:"Novo"})})]}),S&&(0,i.jsx)(o.Z,{severity:"error",sx:{my:1},children:S}),(0,i.jsx)(a.Z,{component:c.Z,children:(0,i.jsxs)(l.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,i.jsx)(d.Z,{children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(h.Z,{align:"left",children:"Nome"}),(0,i.jsx)(h.Z,{align:"left",children:"Data"}),(0,i.jsx)(h.Z,{align:"left",children:"Perguntas"}),(0,i.jsx)(h.Z,{align:"left",children:"A\xe7\xf5es"})]})}),(0,i.jsx)(x.Z,{children:A.map(e=>(0,i.jsxs)(u.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,i.jsx)(h.Z,{component:"th",scope:"row",children:e.nome}),(0,i.jsx)(h.Z,{align:"left",children:P(e.data)}),(0,i.jsx)(h.Z,{align:"left",children:e.qtd_perguntas}),(0,i.jsx)(h.Z,{align:"left",children:(0,i.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(s.ZP,{item:!0,children:(0,i.jsx)(r.Z,{LinkComponent:p(),variant:"contained",startIcon:(0,i.jsx)(v.Z,{}),href:"questionarios/".concat(e.id,"/edit"),children:"Editar"})}),(0,i.jsx)(s.ZP,{item:!0,children:(0,i.jsx)(r.Z,{LinkComponent:p(),variant:"contained",startIcon:(0,i.jsx)(w.Z,{}),color:"secondary",href:"questionarios/".concat(e.id,"/respostas/add"),children:"Responder"})})]})})]},e.id))})]})}),(0,i.jsx)(y,{page:+g,total:b.total,path:"/questionarios"})]})]})};var A=S}},function(e){e.O(0,[889,903,734,443,774,888,179],function(){return e(e.s=9705)}),_N_E=e.O()}]);